<!-- BEGIN_TF_DOCS -->
# Management Group Module

## Overview

- The BBL Management group module creates one Azure management group and associate existing subscriptions to it.
- To read more about the Management groups, please read [What are Azure management groups?](https://docs.microsoft.com/en-us/azure/governance/management-groups/overview).

## Notes

- This module does not follow a naming convention. The name of the Management Group created is the `mg_name` variable's value,
- The `azurerm_management_group` resource allows to set `name` and `group_id`. After thorough testing, it appeared that:
  - `name` and `group_id` variables are actually pointing to the same element in azure: the `ID` of the Management Group,
  - if one of them is set, the Management Group `ID` is set to the provided value, instead of a GUID auto-generated by Azure,
  - The decision was made to not allow to set these variables when using the module. It ensures a set Name and an auto-generated GUID ID of the Management Group,
- To clear all Subscriptions from the Management Group, set `subscription_ids` to an empty list (`[]`).

## Example

```yaml
#--------------------------------------------------------------
#   Tests for Management Group Module
#--------------------------------------------------------------
module "management_group_level_1" {
  # Local use
  source = "../../terraform-azurerm-managementgroup"


  mg_name                     = var.display_name_level_1
  parent_management_group_id  = var.root_management_group_id
  subscription_ids            = var.subscription_ids_level_1
}

module "management_group_level_2" {
  # Local use
  source = "../../terraform-azurerm-managementgroup"


  depends_on = [
    module.management_group_level_1
  ]

  mg_name                     = var.display_name_level_2
  parent_management_group_id  = module.management_group_level_1.id
  subscription_ids            = var.subscription_ids_level_2
}
```

## Documentation
<!-- markdownlint-disable MD033 -->

### Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >=1.0.0 |
| <a name="requirement_azurerm"></a> [azurerm](#requirement\_azurerm) | >=2.90.0 |

### Modules

No modules.

### Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_mg_name"></a> [mg\_name](#input\_mg\_name) | (Required) Name of the Management group. | `string` | n/a | yes |
| <a name="input_parent_management_group_id"></a> [parent\_management\_group\_id](#input\_parent\_management\_group\_id) | (Optional) ID of the parent Management group. | `string` | `null` | no |
| <a name="input_subscription_ids"></a> [subscription\_ids](#input\_subscription\_ids) | (Optional) provide the list of the existing subscription IDs to be associated with the newly created Management group. | `list(string)` | `[]` | no |

### Resources

| Name | Type |
|------|------|
| [azurerm_management_group.this](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/management_group) | resource |

### Outputs

| Name | Description |
|------|-------------|
| <a name="output_id"></a> [id](#output\_id) | The ID of the Management Group. |
| <a name="output_name"></a> [name](#output\_name) | The Name of the Management Group. |

<!-- END_TF_DOCS -->